<ion-header [translucent]="true">
  <ion-toolbar color="secondary">
    <ion-title>
      <div class="center-full">
        <ion-icon
          src="../../../assets/icon/md-cat-white.svg"
          class="title-icon"
        ></ion-icon
        >Quittung aktualisieren
      </div>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row>
    <ion-col size="12">
      <ion-item>
        <ion-datetime
          [(ngModel)]="receipt.Date"
          displayFormat="DD.MM.YYYY"
          placeholder="Datum"
        >
        </ion-datetime>
      </ion-item>
    </ion-col>
    <ion-col size="12">
      <ion-select [(ngModel)]="receipt.User" placeholder="Person">
        <ion-select-option *ngFor="let user of users" [value]="user">
          {{ user.Name }}
        </ion-select-option>
      </ion-select>
    </ion-col>
    <ion-col size="12">
      <ion-item>
        <ion-input
          [(ngModel)]="receipt.Description"
          placeholder="Beschreibung"
        ></ion-input>
      </ion-item>
    </ion-col>
    <ion-col size="12">
      <ion-item>
        <ion-input
          [(ngModel)]="receipt.Amount"
          placeholder="Betrag(€)"
          type="number"
        ></ion-input>
      </ion-item>
    </ion-col>
  </ion-row>

  <h2 class="ion-text-center">Einzelpositionen</h2>
  <ion-row class="ion-text-center" class="header-row col-extend">
    <ion-col size="1" class="ion-text-center"></ion-col>
    <ion-col size="6" class="ion-text-center"> Person </ion-col>
    <ion-col size="7" class="ion-text-left"> Beschreibung </ion-col>
    <ion-col size="6" class="ion-text-right"> Betrag </ion-col>
    <ion-col size="4" class="ion-text-right">
      <ion-button size="small" color="primary" (click)="addPosition()">
        <ion-icon name="add-outline"></ion-icon>
      </ion-button>
    </ion-col>
  </ion-row>

  <ion-row
    *ngFor="let position of receipt.Positions"
    class="data-row col-extend center-full"
  >
    <ion-col size="1" class="ion-text-center"></ion-col>
    <ion-col size="6" class="ion-text-center">
      <ion-select [(ngModel)]="position.User" placeholder="Person">
        <ion-select-option *ngFor="let user of users" [value]="user"
          >{{ user.Name }}
        </ion-select-option>
      </ion-select></ion-col
    >
    <ion-col size="7" class="ion-text-left">
      <ion-item>
        <ion-input
          [(ngModel)]="position.Description"
          placeholder="Beschreibung"
        ></ion-input> </ion-item
    ></ion-col>
    <ion-col size="6" class="ion-text-right">
      <ion-item>
        <ion-input
          [(ngModel)]="position.Amount"
          placeholder="Betrag(€)"
          type="number"
        ></ion-input>
      </ion-item>
    </ion-col>
    <ion-col size="4" class="ion-text-right">
      <ion-button
        size="small"
        color="danger"
        (click)="deletePosition(position)"
      >
        <ion-icon name="trash-outline"></ion-icon>
      </ion-button>
    </ion-col>
    <ion-col size="1" class="ion-text-center"></ion-col>
  </ion-row>
</ion-content>

<ion-footer>
  <ion-item lines="none">
    <ion-col class="ion-text-center">
      <ion-button expand="block" color="success" (click)="updateReceipt()"
        >Aktualisieren</ion-button
      >
    </ion-col>
    <ion-col class="ion-text-center">
      <ion-button expand="block" color="danger" (click)="onDismiss()"
        >Abbrechen</ion-button
      >
    </ion-col>
  </ion-item>
</ion-footer>
